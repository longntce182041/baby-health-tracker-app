API list and sample JSON

Base URL
- http://localhost:3000/api

Auth
- Use header: Authorization: Bearer <token>

1) Register parent
POST /register
{
  "email": "", //your email
  "password": "123456"
}

2) Verify OTP
POST /verify-otp
{
  "email": "", //your email
  "otp": ""   //otp form email
}

3) Login (returns token)
POST /login
{
  "email": "",//your email
  "password": "123456"
}

4) Forgot password (send OTP)
POST /forgot-password
{
  "email": ""//your email
}

5) Reset password
POST /reset-password
{
  "email": "parent1@example.com",
  "otp": "12345",
  "new_password": "NewP@ssw0rd123"
}

6) View profile (auth required)
GET /me

7) Update profile (auth required)
PUT /me
{
  "phone": "0901234567",
  "full_name": "Nguyen Van A",
  "avatar_url": "https://example.com/avatar.png"
}

8) Change password (auth required)
PUT /me/password
{
  "current_password": "P@ssw0rd123",
  "new_password": "NewP@ssw0rd123"
}

9) Add baby (auth required, parent role)
POST /babies
{
  "full_name": "Baby One",
  "avatar_url": "https://example.com/baby.png",
  "day_of_birth": "2024-11-01",
  "gender": "male",
  "note": "Healthy"
}
Note: parent_id is taken from token (req.user.parent_id), not from request body.

10) Update baby (auth required, parent role)
PUT /babies/:id
{
  "full_name": "Baby One Updated",
  "avatar_url": "https://example.com/baby-updated.png",
  "day_of_birth": "2024-11-02",
  "gender": "male",
  "note": ["Updated note"]
}
Note: Allowed fields are full_name, avatar_url, day_of_birth, gender, note.

11) Add baby note (auth required, parent role)
POST /babies/:id/notes
{
  "content": "Bé ngủ tốt hôm nay"
}
or
{
  "note": "Bé ăn tốt hôm nay"
}

12) Delete baby (auth required, parent role)
DELETE /babies/:id

13) List babies (auth required, parent role)
GET /babies
GET /babies?parent_id=65c9b8f2a2f1b6a9b9e1c123

14) Get baby detail (auth required, parent role)
GET /babies/:id

15) Get baby by share code (auth required, parent role)
GET /babies/share?code=AB12CD34

16) Share baby to current parent (auth required, parent role)
POST /babies/share
{
  "code": "AB12CD34"
}

17) Record growth data (auth required, parent role)
POST /growth-records/:baby_id
{
  "head_size": 42.5,
  "weight": 6.2,
  "height": 63.4,
  "record_date": "2026-02-15T00:00:00.000Z"
}

18) View growth chart (auth required, parent role)
GET /growth-records?baby_id=65c9b8f2a2f1b6a9b9e1c123

19) Compare growth with standard (auth required, parent role)
GET /growth-records/compare?baby_id=65c9b8f2a2f1b6a9b9e1c123
GET /growth-records/compare?baby_id=65c9b8f2a2f1b6a9b9e1c123&record_id=65ca9cf7d4f0b8a317a23abc

20) Create health diary (auth required, parent role)
POST /health-logs/:baby_id
{
  "tempurature": 37.1,
  "sleep": 12,
  "image_urls": ["https://example.com/health-log-1.png"],
  "symptoms": ["cough"],
  "activities": ["play", "walk"],
  "eating": "milk 3 times",
  "mood": "happy",
  "notes": "No unusual signs"
}
Note: log_date is auto-set to current datetime by server.

21) View health diary (auth required, parent role)
GET /health-logs?baby_id=65c9b8f2a2f1b6a9b9e1c123

22) Update health diary (auth required, parent role)
PUT /health-logs/:id
{
  "tempurature": 37.4,
  "sleep": 11,
  "symptoms": ["cough", "runny nose"],
  "notes": "Baby is a bit tired in the evening"
}

23) Delete health diary (auth required, parent role)
DELETE /health-logs/:id

24) Add doctor
POST /doctors
{
  "email": "doctor1@example.com",
  "password": "123456",
  "phone": "0901234567",
  "full_name": "Dr. Nguyen Van B",
  "specialty": "Pediatrics",
  "avatar_url": "https://example.com/doctor.png",
  "experience": [
    {
      "certificate_name": "Pediatrics Specialist",
      "certificate_url": "https://example.com/certificates/pediatrics.pdf"
    }
  ]
}
Note: This API creates both doctor profile and doctor account (role = doctor).

  25) Search doctors by specialty (auth required, parent role)
  GET /doctors?specialty=Pediatrics

  26) View doctor details (auth required, parent role)
  GET /doctors/:id

  27) Schedule consultation (auth required, parent role)
  POST /consultations
  {
    "doctor_id": "<doctor_id>",
    "baby_id": "<baby_id>",
    "date": "2026-03-01T00:00:00.000Z",
    "start_time": "08:00",
    "end_time": "09:00",
    "notes": "Short description of the issue"
  }

  28) View consultation doctor list (auth required, parent role)
  GET /consultation-doctors

  29) Chat with doctor - parent send message (auth required, parent role)
  POST /conversations/send
  {
    "doctor_id": "<doctor_id>",
    "baby_id": "<baby_id>",
    "content": "Hello doctor, I have a question about my baby."
  }

  30) Chat with doctor - doctor send message (auth required, doctor role)
  POST /doctor/conversations/send
  {
    "parent_id": "<parent_id>",
    "baby_id": "<baby_id>",
    "content": "Hello, I am reviewing your baby's case."
  }

  31) Chat with doctor - view conversation (auth required, parent role)
  GET /conversations?doctor_id=<doctor_id>&baby_id=<baby_id>

32) Doctor register weekly schedule (auth required, doctor role)
POST /doctor/schedules/week
{
  "week_start": "2026-03-04T00:00:00.000Z", // optional, for client reference
  "days": [
    {
      "date": "2026-03-04T00:00:00.000Z",
      "note": "Morning only",
      "slots": [
        { "start_time": "08:00", "end_time": "09:00" },
        { "start_time": "09:00", "end_time": "10:00" }
      ]
    },
    {
      "date": "2026-03-05T00:00:00.000Z",
      "note": "Afternoon",
      "slots": [
        { "start_time": "14:00", "end_time": "16:00" }
      ]
    }
  ]
}

33) Add vaccine (auth required, admin role)
POST /vaccinations
{
  "vaccine_name": "MMR",
  "dose_number": 1,
  "price": 250000,
  "location": [
    {
      "branch_name": "Central Clinic",
      "address": "123 Nguyen Trai, District 1"
    },
    {
      "branch_name": "East Clinic",
      "address": "456 Le Loi, District 2"
    }
  ]
}

34) Update vaccine locations (auth required, admin role)
PATCH /vaccinations/:id/locations
{
  "add": [
    {
      "branch_name": "West Clinic",
      "address": "789 Tran Hung Dao, District 5"
    }
  ],
  "remove_ids": ["<location_id>"]
}

35) View vaccine list (auth required, parent role)
GET /vaccinations

36) View vaccination clinics by vaccine (auth required, parent role)
GET /vaccinations/:id/locations

37) Book vaccination appointment (auth required, parent role)
POST /vaccination-schedules
{
  "baby_id": "<baby_id>",
  "vaccine_id": "<vaccine_id>",
  "injection_date": "2026-03-15T00:00:00.000Z",
  "location": {
    "branch_name": "Central Clinic",
    "address": "123 Nguyen Trai, District 1"
  },
  "notes": [
    { "content": "Baby had mild fever last time" }
  ]
}

38) View vaccination schedule (auth required, parent role)
GET /vaccination-schedules?baby_id=<baby_id>

39) View vaccination record details (auth required, parent role)
GET /vaccination-schedules/:id

40) Update vaccination record (auth required, parent role)
PUT /vaccination-schedules/:id
{
  "injection_date": "2026-03-20T00:00:00.000Z",
  "location": {
    "branch_name": "East Clinic",
    "address": "456 Le Loi, District 2"
  },
  "notes": [
    { "content": "Rescheduled" }
  ]
}

41) Mark vaccination completed (auth required, parent role)
PATCH /vaccination-schedules/:id/complete

42) View vaccination notes list (auth required, parent role)
GET /vaccination-schedules/:id/notes

43) Vaccination reminder list (auth required, parent role)
GET /notifications/reminders

44) View appointment details (auth required, parent role)
GET /vaccination-schedules/:id


